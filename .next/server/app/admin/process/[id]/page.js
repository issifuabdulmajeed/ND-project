(()=>{var e={};e.id=9547,e.ids=[9547],e.modules={55403:e=>{"use strict";e.exports=require("next/dist/client/components/request-async-storage.external")},94749:e=>{"use strict";e.exports=require("next/dist/client/components/static-generation-async-storage.external")},20399:e=>{"use strict";e.exports=require("next/dist/compiled/next-server/app-page.runtime.prod.js")},25528:e=>{"use strict";e.exports=require("next/dist\\client\\components\\action-async-storage.external.js")},91877:e=>{"use strict";e.exports=require("next/dist\\client\\components\\request-async-storage.external.js")},25319:e=>{"use strict";e.exports=require("next/dist\\client\\components\\static-generation-async-storage.external.js")},39491:e=>{"use strict";e.exports=require("assert")},82361:e=>{"use strict";e.exports=require("events")},57147:e=>{"use strict";e.exports=require("fs")},13685:e=>{"use strict";e.exports=require("http")},95687:e=>{"use strict";e.exports=require("https")},22037:e=>{"use strict";e.exports=require("os")},71017:e=>{"use strict";e.exports=require("path")},12781:e=>{"use strict";e.exports=require("stream")},76224:e=>{"use strict";e.exports=require("tty")},57310:e=>{"use strict";e.exports=require("url")},73837:e=>{"use strict";e.exports=require("util")},59796:e=>{"use strict";e.exports=require("zlib")},73615:(e,r,t)=>{"use strict";t.r(r),t.d(r,{GlobalError:()=>l.a,__next_app__:()=>u,originalPathname:()=>x,pages:()=>d,routeModule:()=>m,tree:()=>c});var s=t(67096),a=t(16132),i=t(37284),l=t.n(i),n=t(32564),o={};for(let e in n)0>["default","tree","pages","GlobalError","originalPathname","__next_app__","routeModule"].indexOf(e)&&(o[e]=()=>n[e]);t.d(r,o);let c=["",{children:["admin",{children:["process",{children:["[id]",{children:["__PAGE__",{},{page:[()=>Promise.resolve().then(t.bind(t,71305)),"C:\\Users\\issif\\ND-project\\src\\app\\admin\\process\\[id]\\page.tsx"]}]},{}]},{}]},{layout:[()=>Promise.resolve().then(t.bind(t,39862)),"C:\\Users\\issif\\ND-project\\src\\app\\admin\\layout.tsx"]}]},{layout:[()=>Promise.resolve().then(t.bind(t,76661)),"C:\\Users\\issif\\ND-project\\src\\app\\layout.tsx"],loading:[()=>Promise.resolve().then(t.bind(t,29782)),"C:\\Users\\issif\\ND-project\\src\\app\\loading.tsx"],"not-found":[()=>Promise.resolve().then(t.t.bind(t,9291,23)),"next/dist/client/components/not-found-error"]}],d=["C:\\Users\\issif\\ND-project\\src\\app\\admin\\process\\[id]\\page.tsx"],x="/admin/process/[id]/page",u={require:t,loadChunk:()=>Promise.resolve()},m=new s.AppPageRouteModule({definition:{kind:a.x.APP_PAGE,page:"/admin/process/[id]/page",pathname:"/admin/process/[id]",bundlePath:"",filename:"",appPaths:[]},userland:{loaderTree:c}})},34714:(e,r,t)=>{Promise.resolve().then(t.bind(t,61721))},61721:(e,r,t)=>{"use strict";t.r(r),t.d(r,{default:()=>EntryControl});var s=t(30784),a=t(9885),i=t(34751),l=t(50981),n=t(57114),o=t(64434),c=t(85879),d=t(87645),x=t(8021),u=t(91328),m=t(26896),p=t(74284),f=t(11440),h=t.n(f),j=t(7625),g=t(27277);function EntryControl(){let e=(0,n.useRouter)(),[r,t]=(0,a.useState)(!1),f=(0,n.useParams)(),[N,k]=(0,a.useState)(!1),[_,y]=(0,a.useState)([]),[P,b]=(0,a.useState)({}),[w,v]=(0,a.useState)(!1),[A,E]=(0,a.useState)([]),[C,q]=(0,a.useState)([]),[R,T]=(0,a.useState)(!1),{data:S}=(0,p.useSession)(),D=["faultId","customerName","product","quantity","application","standard","color","machineName"],I={customerName:"M\xfcşteri",product:"\xdcr\xfcn adı",quantity:"Miktar",application:"Uygulama",standard:"Standart",color:"Renk",machineName:"Makine",faultId:"Takıp Kodu"},getSingleProcess=async()=>{k(!0);let{status:e,data:r}=await (0,l.zJ)(f.id);if(200===e){b(r),y(r?.technicalParams),E(r.machineParams.map(e=>e.param_name)),q(r?.finalControl),k(!1);return}k(!1)};(0,a.useEffect)(()=>{f.id&&getSingleProcess()},[f?.id]);let onUpdateData=async(e,r)=>{if(!e)return;v(!0);let s=await (0,l.ne)(r),{status:a,data:n,response:o}=s;if(o?.error){let{message:e,detail:r}=o?.error;i.Am.error("\xdcr\xfcn g\xfcncelleme başarısız."+e),(0,m.cM)(r),t(!1);return}if(200===a){y(n),v(!1);return}},onAddRow=async e=>{v(!0);let r=await (0,l.Gk)({...e,processId:f.id,machineId:P.machineId}),{status:s,data:a,response:n}=r;if(n?.error){let{message:e,detail:r}=n?.error;i.Am.error("Parametre ekleme işlemi başarısız."+e),(0,m.cM)(r),t(!1);return}if(200===s){y(a),v(!1);return}},onRemoveRow=async e=>{let r=await (0,l.r8)(e),{status:s,data:a,response:n}=r;if(n?.error){let{message:e,detail:r}=n?.error;i.Am.error("Parametre silme işlemi başarısız."+e),(0,m.cM)(r),t(!1);return}if(200===s){y(a);return}},onFinish=async()=>{let{id:e,faultId:r}=P;if(!e||!r)return;t(!0);let s=await (0,l.Q3)({id:e,faultId:r,status:"FINISHED",updatedBy:S?.user?.name}),{status:a,response:n}=s;if(n?.error){let{message:e,detail:r}=n?.error;i.Am.error("Proses g\xfcncelleme işlemi başarısız."+e),(0,m.cM)(r),t(!1);return}200===a&&(await getSingleProcess(),T(!1))},M=["faultId","olcu_Kontrol","gorunum_kontrol","tork_Kontrol","paketleme","kontrol_edilen_miktar","hatali_miktar","makliye_miktar","remarks","image","createdAt","updatedAt","createdBy","updatedBy","result"],K={faultId:"Takıp Kodu",olcu_Kontrol:"\xd6l\xe7\xfc",gorunum_kontrol:"G\xf6r\xfcn\xfcm",tork_Kontrol:"Tork",paketleme:"Paketleme",kontrol_edilen_miktar:"Kontrol edilen miktari",hatali_miktar:"Hatali Miktari",makliye_miktar:"Nakliye Miktari",remarks:"A\xe7ıklama",createdAt:"Oluşturma Tarihi",updatedAt:"G\xfcncellenme Tarihi",createdBy:"Oluşturan",updatedBy:"G\xfcncelleyen",image:"İlgili Dok\xfcman",result:"Sonu\xe7"},renderValues=(e,r)=>["createdAt","updatedAt"].includes(e)?(0,s.jsxs)("p",{className:"font-bold",children:[" ",(0,m.o0)(r)," "]}):["olcu_Kontrol","gorunum_kontrol","tork_Kontrol"].includes(e)?(0,s.jsxs)("p",{className:"font-bold",children:[" ","NOT_OK"===r?"İYİ DEĞİL":"İYİ"," "]}):"result"===e?(0,s.jsxs)("p",{className:"font-bold uppercase",children:[" ",{ACCEPT:"Kabul",ACCEPTANCE_WITH_CONDITION:"Şartlı Kabul",PRE_PROCESS:"\xd6n İşlem gerekli",REJECT:"Ret"}[r]," "]}):"image"===e?s.jsx(g.Z,{file:r}):(0,s.jsxs)("p",{className:"font-bold",children:[" ",r," "]});return(0,s.jsxs)("div",{className:"mx-auto mt-4 max-w-full rounded-2xl px-2",children:[N?s.jsx(o.kx,{}):(0,s.jsxs)("div",{className:"flex flex-col gap-8",children:[s.jsx("div",{className:"flex justify-end",children:(0,s.jsxs)(h(),{href:"/admin/process",className:"text-md flex items-center gap-2 self-start  dark:text-white",children:[s.jsx("span",{children:s.jsx(j.U1p,{})}),"T\xfcm Prosesleri"]})}),(0,s.jsxs)(c.Z,{extra:"w-full px-6 py-8",children:[s.jsx("h2",{className:"my-5 text-2xl font-bold",children:"\xdcr\xfcn Bilgileri"}),s.jsx("div",{className:"grid grid-cols-2 gap-3 md:grid-cols-3 lg:grid-cols-4",children:Object.entries(P).map(([e,r],t)=>{if(D.includes(e))return(0,s.jsxs)("div",{className:"",children:[s.jsx("h2",{className:"font-bold capitalize italic",children:I[e]}),(0,s.jsxs)(s.Fragment,{children:[" ",r]})]},t)})})]}),(0,s.jsxs)(c.Z,{extra:"w-full px-6 py-8",children:[(0,s.jsxs)("div",{className:"w-full",children:[(0,s.jsxs)("div",{className:"my-5 flex justify-between",children:[s.jsx("h2",{className:"text-2xl font-bold",children:"Teknik Parametreleri"}),(0===C.length||"ACCEPT"!==C[0].result)&&(S?.user?.role==="TECH"||S?.user?.role==="ADMIN")?s.jsx(x.Z,{icon:s.jsx(j.x06,{className:"mr-1 h-5 w-5"}),extra:"max-w-fit px-4  h-[40px]",text:`${_.length>0?"PARAMETRE D\xdcZENLE":"PARAMETRE EKLE"}`,onClick:()=>{e.push(`/admin/process/create/${P.id}`)}}):null]}),s.jsx(d.Z,{fields:A,techParams:_,status:"FINISHED",onUpdateData:(e,r)=>onUpdateData(e,r),onAddRow:e=>onAddRow(e),onRemoveRow:e=>onRemoveRow(e)},w)]}),(0,s.jsxs)("div",{className:"mt-8 flex justify-between text-sm font-bold opacity-60",children:[(0,s.jsxs)("div",{children:[(0,s.jsxs)("p",{children:["Oluşturan: ",P?.createdBy]}),(0,s.jsxs)("p",{children:["Oluşturulma Tarihi:"," ",P?.createdAt?(0,m.o0)(P?.createdAt):""]})]}),(0,s.jsxs)("div",{children:[(0,s.jsxs)("p",{children:["G\xfcncelleyen: ",P?.updatedBy]}),(0,s.jsxs)("p",{children:["G\xfcncelleme Tarihi:"," ",P?.updatedAt?(0,m.o0)(P?.updatedAt):""]})]})]})]}),s.jsx(c.Z,{extra:"w-full px-6 py-8",children:(0,s.jsxs)("div",{className:"w-full",children:[(0,s.jsxs)("div",{className:"my-5 flex justify-between",children:[s.jsx("h2",{className:"text-2xl font-bold",children:"Final Kontrol Bilgileri"}),"FINISHED"===P.status&&(S?.user?.role==="SUPER"||S?.user?.role==="ADMIN")?s.jsx(x.Z,{icon:s.jsx(j.x06,{className:"mr-1 h-5 w-5"}),extra:"max-w-fit px-4  h-[40px]",text:`${C.length>0?"FİNAL KONTROL\xdc D\xdcZENLE":"FİNAL KONTROL\xdc YAP"} `,onClick:()=>{e.push(`/admin/process/control/${P.id}`)}}):null]}),0===C.length?s.jsx("div",{className:"flex h-32 w-full items-center justify-center opacity-40",children:"Hen\xfcz final kontrol\xfc yapılmadı"}):s.jsx("div",{className:"grid grid-cols-2 gap-3 md:grid-cols-3 lg:grid-cols-4",children:Object.entries(C[0]).map(([e,r],t)=>{if(M.includes(e))return(0,s.jsxs)("div",{className:"mb-3 flex flex-col flex-nowrap",children:[s.jsx("h4",{className:"mb-0 italic",children:K[e]}),renderValues(e,r)]},t)})})]})})]}),(0,s.jsxs)(u.Z,{show:R,extra:"flex flex-col gap-3 py-6 px-8",children:[s.jsx("h1",{className:"text-3xl",children:"Proses Tamamlama"}),s.jsx("p",{className:"mb-2 text-lg",children:"Bu Prosesi tamamlamak istediğini Emin misin ?"}),(0,s.jsxs)("div",{className:"flex gap-4",children:[s.jsx(x.Z,{loading:r,text:"EVET",extra:"w-[60px]  h-[40px]",onClick:onFinish}),s.jsx(x.Z,{text:"HAYIR",extra:"w-[60px] h-[40px] bg-red-700",onClick:()=>T(!1)})]})]})]})}},27277:(e,r,t)=>{"use strict";t.d(r,{Z:()=>FileViewer});var s=t(30784);t(9885);var a=t(7625);function FileViewer({file:e}){return e?s.jsx("a",{href:`/uploads/${e}`,target:"_blank",children:s.jsx(a._b$,{className:"h-6 w-6"})}):null}},71305:(e,r,t)=>{"use strict";t.r(r),t.d(r,{$$typeof:()=>l,__esModule:()=>i,default:()=>o});var s=t(95153);let a=(0,s.createProxy)(String.raw`C:\Users\issif\ND-project\src\app\admin\process\[id]\page.tsx`),{__esModule:i,$$typeof:l}=a,n=a.default,o=n}};var r=require("../../../../webpack-runtime.js");r.C(e);var __webpack_exec__=e=>r(r.s=e),t=r.X(0,[8998,3657,7282,4407,614,580,7625,4997,4138,1200,3008,3763,981,6896,6510,1303,8021,4434,4346],()=>__webpack_exec__(73615));module.exports=t})();